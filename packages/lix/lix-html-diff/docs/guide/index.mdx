import { Showcase } from "../components/showcase";

# Getting Started

## Overview

Lix HTML Diff is a simple way to generate and display diffs for any app UI.

Assume you want to diff a table that's displayed to users. You render the before and after HTML, then pass both into the `renderHtmlDiff` function to get the diff:

```typescript
import { renderHtmlDiff } from "@lix-js/html-diff";

const tableBefore = renderTable(beforeData);
const tableAfter = renderTable(afterData);

const diff = renderHtmlDiff({ 
  beforeHtml: tableBefore, 
  afterHtml: tableAfter 
});

render(diff, document.getElementById("diff-container"));
```

<Showcase
  before={`<table class="pricing-table">
  <thead>
    <tr>
      <th></th>
      <th>T-Shirt</th>
      <th>Shoe</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="row-header">Cost</td>
      <td data-diff-key="xjht">$8</td>
      <td data-diff-key="pk9m">$15</td>
    </tr>
    <tr>
      <td class="row-header">Sales Price</td>
      <td data-diff-key="zm7q">$40</td>
      <td data-diff-key="nf2w">$35</td>
    </tr>
  </tbody>
</table>`}
  after={`<table class="pricing-table">
  <thead>
    <tr>
      <th></th>
      <th>T-Shirt</th>
      <th>Shoe</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="row-header">Cost</td>
      <td data-diff-key="xjht">$6</td>
      <td data-diff-key="pk9m">$15</td>
    </tr>
    <tr>
      <td class="row-header">Sales Price</td>
      <td data-diff-key="zm7q">$45</td>
      <td data-diff-key="nf2w">$39</td>
    </tr>
  </tbody>
</table>`}
  css={`/* Table styling */
.pricing-table {
  border-collapse: collapse;
  width: 100%;
}

.pricing-table th,
.pricing-table td {
  border: 1.1px solid #ccc;
  padding: 8px;
}

.pricing-table .row-header {
  font-weight: bold;
}

/* Diff highlighting */
.diff-create {
  background-color: #d4edda;
  color: #155724;
}

.diff-update {
  background-color: #fff3cd;
  color: #856404;
}

.diff-delete {
  background-color: #f8d7da;
  color: #721c24;
}`}
/>

Notice how the rendered diff automatically highlights changed cells while preserving the table structure. This works without any custom diff logic - just your existing HTML with [`data-diff-key`](/guide/attributes.html#data-diff-key) attributes.

- üåê **Universal**: Works for any app that renders to HTML (which is most apps!)
- ‚ö° **Simple**: No need for renderer-specific diff logic.
- üé® **Uses your styles**: Uses your existing CSS.
- üîß **Framework Agnostic**: Works with React, Vue, Svelte, Angular, and more.

## Installation

```bash
npm install @lix-js/html-diff
```

## Usage

1. Add `data-diff-key` attributes to your rendered HTML elements.
2. Use `renderHtmlDiff` to generate a diff HTML string.
3. Display the diff HTML string in your app.

```typescript
import { renderHtmlDiff } from "@lix-js/html-diff";

// Example before and after HTML
//
// Usually, you would get these from your app's rendering logic,
// but for demonstration, we'll use hardcoded strings.
const beforeHtml = `
  <p data-diff-key='p1'>Old text.</p>
`;
const afterHtml = `
  <p data-diff-key='p1'>Updated text!</p>
  <p data-diff-key='p2'>Added.</p>
`;

const diffHtmlString = renderHtmlDiff({ beforeHtml, afterHtml });

document.getElementById("diff-container")!.innerHTML = diffHtmlString;
```

<Showcase
  before="<p data-diff-key='p1'>Old text.</p>"
  after="<p data-diff-key='p1'>Updated text!</p><p data-diff-key='p2'>Added.</p>"
  css=".diff-create { color: green; } .diff-update { color: orange; } .diff-delete { color: red; }"
/>
